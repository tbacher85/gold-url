<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alchemist's Forge - URL Shortener Demo</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom styles for enhanced alchemy theme */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0D0D1A 0%, #1a1a2e 50%, #16213e 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        /* Animated background elements */
        .bg-circles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .circle {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,193,7,0.1) 0%, rgba(255,193,7,0) 70%);
            animation: float 20s infinite linear;
        }
        
        .circle:nth-child(1) {
            width: 300px;
            height: 300px;
            top: 10%;
            left: 5%;
            animation-duration: 25s;
        }
        
        .circle:nth-child(2) {
            width: 200px;
            height: 200px;
            top: 60%;
            right: 10%;
            animation-duration: 20s;
            animation-direction: reverse;
        }
        
        .circle:nth-child(3) {
            width: 150px;
            height: 150px;
            bottom: 10%;
            left: 20%;
            animation-duration: 15s;
        }
        
        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
            100% { transform: translateY(0) rotate(360deg); }
        }
        
        /* Gold gradient text */
        .gold-gradient {
            background: linear-gradient(135deg, #FFC107 0%, #FFD54F 25%, #FFECB3 50%, #FFD54F 75%, #FFC107 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(255, 193, 7, 0.3);
        }
        
        /* Glass morphism effect */
        .glass {
            background: rgba(28, 28, 48, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 209, 102, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        /* Enhanced gold glow */
        .gold-glow {
            box-shadow: 0 0 5px rgba(255, 193, 7, 0.5);
            transition: all 0.3s ease;
        }
        
        .gold-glow:hover {
            box-shadow: 0 0 20px rgba(255, 193, 7, 0.8), 0 0 30px rgba(255, 193, 7, 0.4);
            transform: translateY(-2px);
        }
        
        /* Pulse animation for important elements */
        @keyframes pulse-gold {
            0% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 193, 7, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 193, 7, 0); }
        }
        
        .pulse-gold {
            animation: pulse-gold 2s infinite;
        }
        
        /* Toast notifications */
        .toast {
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            transform: translateX(100%);
            opacity: 0;
        }
        
        .toast.show {
            transform: translateX(0);
            opacity: 1;
        }
        
        /* Link item hover effects */
        .link-item {
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }
        
        .link-item:hover {
            border-left-color: #FFC107;
            background: rgba(255, 193, 7, 0.05);
            transform: translateX(5px);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(28, 28, 48, 0.5);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #FFC107, #FFD54F);
            border-radius: 10px;
        }
        
        /* Loading spinner */
        .spinner {
            border: 2px solid rgba(255, 193, 7, 0.3);
            border-radius: 50%;
            border-top: 2px solid #FFC107;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Title font */
        .title-font {
            font-family: 'Cinzel', serif;
        }
        
        /* Shimmer effect for empty state */
        .shimmer {
            background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0) 100%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* Fixed demo badge positioning */
        .demo-badge {
            position: absolute;
            top: 12px;
            right: 20px;
            background: linear-gradient(135deg, #FFC107, #FFD54F);
            color: black;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: bold;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        /* URL transformation animation */
        .url-transformation {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            margin: 16px 0;
        }
        
        .url-box {
            flex: 1;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 193, 7, 0.2);
            border-radius: 8px;
            padding: 12px;
            font-family: monospace;
            font-size: 0.8rem;
            overflow: hidden;
            position: relative;
            word-break: break-all;
        }
        
        .long-url {
            color: #ff6b6b;
            text-decoration: line-through;
            opacity: 0.8;
        }
        
        .short-url {
            color: #51cf66;
            font-weight: bold;
        }
        
        .transform-arrow {
            color: #FFC107;
            font-size: 1.2rem;
        }
        
        /* Analytics chart styles */
        .analytics-bar {
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(90deg, #FFC107, #FFD54F);
            transition: width 0.5s ease;
        }
        
        .analytics-item {
            margin-bottom: 12px;
        }

        /* Progress bar for link limits */
        .progress-bar {
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FFC107, #FFD54F);
            transition: width 0.3s ease;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            .demo-badge {
                top: 8px;
                right: 12px;
                padding: 4px 10px;
                font-size: 0.7rem;
            }
            
            .glass {
                margin-bottom: 1rem;
            }
            
            /* Fix for explanation section grid */
            .grid.md\:grid-cols-2 {
                display: flex;
                flex-direction: column;
                gap: 1.5rem;
            }
            
            .url-transformation {
                flex-direction: column;
                text-align: center;
                gap: 8px;
            }
            
            .transform-arrow {
                transform: rotate(90deg);
                margin: 4px 0;
            }
            
            .url-box {
                font-size: 0.7rem;
                padding: 8px;
            }
            
            /* Ensure text fits in feature cards */
            .bg-gradient-to-br.from-amber-900\/20.to-amber-800\/10 {
                overflow-wrap: break-word;
                word-wrap: break-word;
            }
            
            /* Analytics box fixes */
            .bg-black\/30.rounded-lg.p-4 {
                font-size: 0.75rem;
            }
            
            .bg-black\/30.rounded-lg.p-4 .font-mono {
                font-size: 0.7rem;
            }
        }

        /* Additional mobile optimizations for very small screens */
        @media (max-width: 480px) {
            .url-box {
                font-size: 0.65rem;
                padding: 6px;
            }
            
            .bg-gradient-to-br.from-amber-900\/20.to-amber-800\/10 {
                padding: 1rem;
            }
            
            .bg-gradient-to-br.from-amber-900\/20.to-amber-800\/10 h3 {
                font-size: 1.1rem;
            }
            
            .bg-gradient-to-br.from-amber-900\/20.to-amber-800\/10 p {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body class="text-white min-h-screen">
    <!-- Animated Background -->
    <div class="bg-circles">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
    </div>

    <!-- Toast Notification System -->
    <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2 max-w-sm"></div>

    <!-- Waitlist Modal -->
    <div id="waitlist-modal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 hidden">
        <div class="glass rounded-2xl p-6 max-w-md w-full border border-amber-500/30">
            <div class="text-center mb-6">
                <i class="fas fa-crown text-amber-500 text-4xl mb-4"></i>
                <h3 class="text-2xl font-bold text-amber-300 mb-2">Join The Inner Circle</h3>
                <p class="text-gray-300">Get permanent links, real analytics, and early access to premium features</p>
            </div>
            
            <form id="modal-waitlist-form" class="space-y-4">
                <div>
                    <input 
                        type="email" 
                        id="modal-email"
                        placeholder="Enter your email..." 
                        required
                        class="w-full p-4 rounded-xl bg-[#0D0D1A] border border-gray-700 focus:border-amber-500 focus:outline-none text-white"
                    >
                </div>
                <div class="flex space-x-3">
                    <button type="button" id="modal-cancel" class="flex-1 py-3 px-4 rounded-xl bg-gray-700 hover:bg-gray-600 transition-colors">Later</button>
                    <button type="submit" class="flex-1 py-3 px-4 rounded-xl bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-black font-bold transition-all duration-300 gold-glow">
                        Join Waitlist
                    </button>
                </div>
                <p class="text-xs text-gray-500 text-center">
                    <i class="fas fa-shield-alt mr-1"></i> No spam, just alchemical secrets
                </p>
            </form>
        </div>
    </div>

    <!-- Header Section -->
    <header class="container mx-auto px-4 py-6 md:py-8 text-center relative">
        <div class="absolute top-0 left-1/2 transform -translate-x-1/2 w-24 h-1 bg-gradient-to-r from-transparent via-amber-400 to-transparent rounded-full"></div>
        <h1 class="text-4xl md:text-6xl font-bold gold-gradient title-font mb-4 tracking-wide">Alchemist's Forge</h1>
        <p class="text-lg md:text-xl text-amber-200 max-w-2xl mx-auto leading-relaxed px-4">
            Transform long URLs into <span class="text-amber-300 font-semibold">golden, trackable short links</span>
        </p>
        <div class="mt-4 bg-amber-900/30 inline-flex items-center px-4 py-2 rounded-full border border-amber-700/50">
            <i class="fas fa-flask text-amber-400 mr-2"></i>
            <span class="text-amber-200 text-sm">Live Demo - Real Redirects Active</span>
        </div>
        <div class="mt-2 text-xs text-amber-300/70 max-w-md mx-auto">
            <i class="fas fa-star mr-1"></i>
            Create up to 10 links - Join waitlist for unlimited permanent links
        </div>
        <div class="mt-4 flex justify-center space-x-2">
            <div class="w-2 h-2 bg-amber-400 rounded-full animate-pulse"></div>
            <div class="w-2 h-2 bg-amber-400 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
            <div class="w-2 h-2 bg-amber-400 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-6 md:py-8 max-w-4xl">
        <!-- Use Case Explanation - BEAUTIFIED VERSION -->
        <section class="glass rounded-2xl p-6 mb-6">
            <h2 class="text-2xl font-bold text-amber-300 mb-6 flex items-center justify-center">
                <i class="fas fa-lightbulb mr-3 text-amber-500"></i> Why Use Golden Elixirs?
            </h2>
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Short & Memorable Card -->
                <div class="bg-gradient-to-br from-amber-900/20 to-amber-800/10 rounded-xl p-6 border border-amber-700/30">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 rounded-full bg-amber-500/20 flex items-center justify-center mr-4">
                            <i class="fas fa-link text-amber-400 text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-amber-300">Short & Memorable Links</h3>
                    </div>
                    <p class="text-gray-300 mb-4">Transform unwieldy URLs into clean, shareable links that fit anywhere and are easy to remember.</p>
                    
                    <div class="url-transformation">
                        <div class="url-box long-url">
                            https://example.com/products/electronics/smartphones/new-iphone-15-pro-max-1tb
                        </div>
                        <div class="transform-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                        <div class="url-box short-url">
                            gold-url.com/gold123
                        </div>
                    </div>
                    
                    <div class="text-xs text-amber-200/70 mt-3">
                        <i class="fas fa-check-circle mr-1"></i>
                        Perfect for social media, presentations, and printed materials
                    </div>
                </div>

                <!-- Track Engagement Card -->
                <div class="bg-gradient-to-br from-amber-900/20 to-amber-800/10 rounded-xl p-6 border border-amber-700/30">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 rounded-full bg-amber-500/20 flex items-center justify-center mr-4">
                            <i class="fas fa-chart-line text-amber-400 text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-amber-300">Preview: Engagement Analytics</h3>
                    </div>
                    <p class="text-gray-300 mb-4">See exactly how analytics will work in the full version. Essential data for marketing campaigns and understanding your audience.</p>
                    
                    <div class="bg-black/30 rounded-lg p-4 mb-3">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-amber-300 font-mono">gold-url.com/gold123</span>
                            <span class="bg-amber-500 text-black px-2 py-1 rounded-full text-sm font-bold">84 demo clicks</span>
                        </div>
                        <div class="text-xs text-gray-400">
                            <div class="flex justify-between">
                                <span>Preview data:</span>
                                <span class="text-amber-300">+24% growth</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-xs text-amber-200/70">
                        <i class="fas fa-info-circle mr-1"></i>
                        Full version tracks all clicks from anywhere, not just demo clicks
                    </div>
                </div>
            </div>
        </section>

        <!-- Demo Notice Banner -->
        <div class="glass rounded-2xl p-4 mb-6 border-l-4 border-amber-500">
            <div class="flex items-start">
                <i class="fas fa-rocket text-amber-400 text-xl mr-3 mt-1"></i>
                <div>
                    <h3 class="font-bold text-amber-300">Live Demo - Real Redirects Active!</h3>
                    <p class="text-gray-300 text-sm">Your short URLs now actually work! Create a link and test it. 
                    <span class="text-amber-200">Links stored in browser only - join waitlist for permanent storage and real analytics.</span></p>
                </div>
            </div>
        </div>

        <!-- Link Creation Section -->
        <section class="glass rounded-2xl p-6 mb-6 md:mb-8 relative overflow-hidden">
            <div class="demo-badge">DEMO</div>
            
            <!-- Decorative corner accents -->
            <div class="absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 border-amber-400 rounded-tl-lg"></div>
            <div class="absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 border-amber-400 rounded-tr-lg"></div>
            <div class="absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 border-amber-400 rounded-bl-lg"></div>
            <div class="absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 border-amber-400 rounded-br-lg"></div>
            
            <h2 class="text-2xl font-bold text-amber-300 mb-4 flex items-center">
                <i class="fas fa-fire mr-3 text-amber-500"></i> Forge a New Elixir
            </h2>
            
            <!-- Usage Progress -->
            <div id="usage-progress" class="mb-4 hidden">
                <div class="flex justify-between text-sm mb-2">
                    <span class="text-amber-200">Your Demo Usage</span>
                    <span class="text-amber-300" id="usage-count">0/10 links</span>
                </div>
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
                </div>
                <p class="text-xs text-amber-200/70 mt-2" id="progress-message">
                    Create up to 10 links in this demo
                </p>
            </div>
            
            <p class="text-gray-300 mb-6 leading-relaxed">Transform your lengthy URL into a powerful, shortened Elixir that actually works!</p>
            
            <div class="flex flex-col md:flex-row gap-4 mb-4">
                <div class="flex-grow relative">
                    <input 
                        type="url" 
                        id="url-input" 
                        placeholder="Paste your long URL here..." 
                        class="w-full p-4 rounded-xl bg-[#0D0D1A] border border-gray-700 focus:border-amber-500 focus:outline-none text-white transition-all duration-300 pl-12"
                    >
                    <div class="absolute left-4 top-1/2 transform -translate-y-1/2 text-amber-500">
                        <i class="fas fa-link"></i>
                    </div>
                </div>
                <button 
                    id="transmute-btn" 
                    class="bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-black font-bold py-4 px-6 md:px-8 rounded-xl transition-all duration-300 gold-glow flex items-center justify-center min-w-[160px] md:min-w-[180px] pulse-gold"
                >
                    <i class="fas fa-gem mr-2"></i> Transmute
                </button>
            </div>
            
            <!-- Conversion Message -->
            <div id="conversion-message" class="hidden bg-amber-800/20 rounded-lg p-4 mt-4 border border-amber-700/30">
                <div class="flex items-start">
                    <i class="fas fa-crown text-amber-400 text-lg mr-3 mt-1"></i>
                    <div class="flex-1">
                        <h4 class="font-bold text-amber-300 mb-1">Ready for Unlimited Links?</h4>
                        <p class="text-amber-200 text-sm mb-3">Join the waitlist to get permanent link storage, real analytics, and early access to premium features.</p>
                        <button onclick="showWaitlistModal('You\'re a power user!')" class="bg-gradient-to-r from-amber-500 to-amber-600 text-black font-bold py-2 px-6 rounded-lg gold-glow text-sm">
                            <i class="fas fa-wand-magic-sparkles mr-2"></i> Join Inner Circle
                        </button>
                    </div>
                </div>
            </div>
            
            <p class="text-xs text-gray-500 text-center md:text-left mt-4">
                <i class="fas fa-info-circle mr-1"></i> Demo links stored in browser only. Join waitlist for permanent storage.
            </p>
        </section>

        <!-- Tracking Section -->
        <section class="glass rounded-2xl p-6 mb-6 md:mb-8 relative overflow-hidden">
            <div class="demo-badge">DEMO</div>
            
            <!-- Decorative corner accents -->
            <div class="absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 border-amber-400 rounded-tl-lg"></div>
            <div class="absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 border-amber-400 rounded-tr-lg"></div>
            <div class="absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 border-amber-400 rounded-bl-lg"></div>
            <div class="absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 border-amber-400 rounded-br-lg"></div>
            
            <div class="flex flex-col md:flex-row md:items-center justify-between mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-amber-300 mb-2 flex items-center">
                        <i class="fas fa-eye mr-3 text-amber-500"></i> Your Elixir Collection
                    </h2>
                    <p class="text-gray-300">Manage and track your shortened URLs</p>
                </div>
                <div class="mt-4 md:mt-0 flex items-center space-x-4">
                    <div class="bg-amber-900/30 px-4 py-2 rounded-lg border border-amber-700/50">
                        <i class="fas fa-vial text-amber-400 mr-2"></i>
                        <span class="text-amber-200 font-medium" id="total-elixirs">0</span>
                        <span class="text-gray-400 ml-1">Links</span>
                    </div>
                    <button 
                        onclick="showWaitlistModal('Export your links')" 
                        class="bg-amber-900/30 hover:bg-amber-800/40 px-4 py-2 rounded-lg border border-amber-700/50 gold-glow transition-all duration-300 flex items-center"
                        title="Export your links"
                    >
                        <i class="fas fa-download text-amber-400 mr-2"></i>
                        <span class="text-amber-200">Export</span>
                    </button>
                </div>
            </div>
            
            <div id="links-container" class="max-h-[400px] overflow-y-auto pr-2 mb-6">
                <!-- Links will be dynamically added here -->
                <div id="empty-state" class="text-center py-8 text-gray-400">
                    <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-amber-900/30 to-amber-700/10 flex items-center justify-center border border-amber-800/30 shimmer">
                        <i class="fas fa-flask text-2xl text-amber-700/70"></i>
                    </div>
                    <h3 class="text-lg font-medium text-gray-300 mb-2">No Elixirs Created Yet</h3>
                    <p class="max-w-md mx-auto text-sm">Create your first shortened URL above to see it here.</p>
                </div>
            </div>

            <!-- Enhanced Analytics Section -->
            <div id="analytics-section" class="hidden bg-amber-900/20 rounded-xl p-4 border border-amber-700/30 mb-4">
                <div class="flex items-center justify-between mb-3">
                    <h4 class="font-bold text-amber-300 flex items-center">
                        <i class="fas fa-chart-bar mr-2"></i> Analytics Preview
                    </h4>
                    <span class="bg-amber-500 text-black text-xs px-2 py-1 rounded-full font-bold">DEMO</span>
                </div>
                
                <div class="bg-amber-800/20 rounded-lg p-3 mb-3">
                    <div class="flex items-start">
                        <i class="fas fa-info-circle text-amber-400 mt-1 mr-2"></i>
                        <p class="text-amber-200 text-sm">
                            This preview shows how analytics will work. Currently tracking demo clicks only.
                            Full version includes real-time tracking from all sources.
                        </p>
                    </div>
                </div>
                
                <div id="analytics-content" class="space-y-3">
                    <!-- Analytics will be populated here -->
                </div>
            </div>

            <!-- Enhanced Full Version Features -->
            <div class="bg-amber-900/20 rounded-xl p-4 border border-amber-700/30">
                <h4 class="font-bold text-amber-300 mb-3 flex items-center">
                    <i class="fas fa-rocket mr-2"></i> Full Version Includes:
                </h4>
                <div class="grid grid-cols-1 gap-3 text-sm">
                    <div class="flex items-start">
                        <i class="fas fa-cloud text-green-400 mt-1 mr-3"></i>
                        <div>
                            <h5 class="font-bold text-amber-200">Permanent Link Storage</h5>
                            <p class="text-gray-300 text-xs">Your links won't disappear when you clear browser data</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i class="fas fa-chart-bar text-green-400 mt-1 mr-3"></i>
                        <div>
                            <h5 class="font-bold text-amber-200">Real Analytics</h5>
                            <p class="text-gray-300 text-xs">Track all clicks from anywhere, not just demo clicks</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i class="fas fa-globe text-green-400 mt-1 mr-3"></i>
                        <div>
                            <h5 class="font-bold text-amber-200">Custom Domains</h5>
                            <p class="text-gray-300 text-xs">Use your own domain (like yourbrand.com/links)</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <i class="fas fa-infinity text-green-400 mt-1 mr-3"></i>
                        <div>
                            <h5 class="font-bold text-amber-200">Unlimited Links</h5>
                            <p class="text-gray-300 text-xs">No restrictions on how many links you can create</p>
                        </div>
                    </div>
                </div>
                
                <div class="mt-4 pt-4 border-t border-amber-700/30">
                    <button onclick="showWaitlistModal('Ready for the full experience?')" class="w-full bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-black font-bold py-3 px-6 rounded-lg transition-all duration-300 gold-glow flex items-center justify-center">
                        <i class="fas fa-crown mr-2"></i> Join Waitlist for Full Access
                    </button>
                </div>
            </div>
        </section>

        <!-- Waitlist Conversion Section -->
        <section class="glass rounded-2xl p-6 md:p-8 text-center relative overflow-hidden">
            <div class="absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 border-amber-400 rounded-tl-lg"></div>
            <div class="absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 border-amber-400 rounded-tr-lg"></div>
            <div class="absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 border-amber-400 rounded-bl-lg"></div>
            <div class="absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 border-amber-400 rounded-br-lg"></div>
            
            <div class="max-w-2xl mx-auto">
                <div class="w-16 h-16 md:w-20 md:h-20 mx-auto mb-4 md:mb-6 rounded-full bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center">
                    <i class="fas fa-crown text-xl md:text-2xl text-black"></i>
                </div>
                
                <h2 class="text-2xl md:text-3xl font-bold gold-gradient title-font mb-4">Ready for True Alchemical Power?</h2>
                <p class="text-lg md:text-xl text-amber-200 mb-4">Get permanent links, real analytics, and unlimited access</p>
                
                <!-- Social Proof Counter -->
                <div class="bg-amber-900/30 rounded-full px-6 py-3 inline-flex items-center mb-6 border border-amber-700/50">
                    <i class="fas fa-users text-amber-400 mr-2"></i>
                    <span class="text-amber-200 font-bold text-lg" id="joined-count">79</span>
                    <span class="text-gray-300 ml-2">alchemists already joined</span>
                </div>
                
                <div class="bg-amber-900/20 rounded-xl p-4 md:p-6 mb-6">
                    <h3 class="text-amber-300 font-bold mb-4">Early Adopter Benefits:</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left">
                        <div class="flex items-start">
                            <i class="fas fa-gem text-amber-400 mt-1 mr-3"></i>
                            <div>
                                <h4 class="font-bold text-amber-200">Lifetime Discount</h4>
                                <p class="text-gray-300 text-sm">50% off forever for first 100 users</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-chart-line text-amber-400 mt-1 mr-3"></i>
                            <div>
                                <h4 class="font-bold text-amber-200">Real Analytics</h4>
                                <p class="text-gray-300 text-sm">Track all clicks, not just demo clicks</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-infinity text-amber-400 mt-1 mr-3"></i>
                            <div>
                                <h4 class="font-bold text-amber-200">Unlimited Links</h4>
                                <p class="text-gray-300 text-sm">No restrictions on link creation</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-users text-amber-400 mt-1 mr-3"></i>
                            <div>
                                <h4 class="font-bold text-amber-200">Private Community</h4>
                                <p class="text-gray-300 text-sm">Join our exclusive Discord</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Email Capture Form with Formspree -->
                <form 
                    id="waitlist-form" 
                    action="https://formspree.io/f/xxxxx" 
                    method="POST"
                    class="space-y-4 max-w-md mx-auto"
                >
                    <div class="flex flex-col sm:flex-row gap-3">
                        <input 
                            type="email" 
                            name="email"
                            id="waitlist-email" 
                            placeholder="Enter your email..." 
                            required
                            class="flex-grow p-3 md:p-4 rounded-xl bg-[#0D0D1A] border border-gray-700 focus:border-amber-500 focus:outline-none text-white text-sm md:text-base"
                        >
                        <button 
                            type="submit"
                            class="bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-black font-bold py-3 md:py-4 px-6 md:px-8 rounded-xl transition-all duration-300 gold-glow flex items-center justify-center whitespace-nowrap text-sm md:text-base"
                        >
                            <i class="fas fa-wand-magic-sparkles mr-2"></i> Join Waitlist
                        </button>
                    </div>
                    <p class="text-xs text-gray-500">
                        <i class="fas fa-shield-alt mr-1"></i> No spam, just alchemical secrets. Unsubscribe anytime.
                    </p>
                    
                    <!-- Formspree hidden fields (optional) -->
                    <input type="hidden" name="_subject" value="New Alchemist's Forge Waitlist Signup!">
                    <input type="hidden" name="_replyto" value="%email%">
                    <input type="text" name="_gotcha" style="display:none">
                </form>

                <!-- Social Proof -->
                <div class="mt-6 pt-6 border-t border-gray-700">
                    <p class="text-gray-400 mb-4 text-sm">Trusted by creators from:</p>
                    <div class="flex flex-wrap justify-center gap-4 md:gap-6 text-gray-500 text-sm">
                        <div class="flex items-center">
                            <i class="fab fa-google text-lg mr-2"></i>
                            <span>Google</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fab fa-meta text-lg mr-2"></i>
                            <span>Meta</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fab fa-github text-lg mr-2"></i>
                            <span>GitHub</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-shop text-lg mr-2"></i>
                            <span>Shopify</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="container mx-auto px-4 py-6 md:py-8 text-center text-gray-500 mt-8 md:mt-12">
        <div class="border-t border-gray-800 pt-6">
            <p class="flex items-center justify-center text-sm md:text-base">
                <i class="fas fa-hat-wizard text-amber-500 mr-2"></i>
                Alchemist's Forge &copy; 2025 - Powered by Gold-URL.com
            </p>
        </div>
    </footer>

    <script>
        // âœ… REPLACE THIS WITH YOUR ACTUAL GOOGLE APPS SCRIPT URL
        const BACKEND_URL = 'https://script.google.com/macros/s/AKfycbxsugqP7Si8DMtTHMTjqq3DCk_QPwIRm7V7NOtq31RFq8clW2KS-IKKG2o149y9rsR_Mg/exec';
        
        // Configuration
        const MAX_FREE_LINKS = 10;
        const CONVERSION_TRIGGER = 5;
        
        // Firebase simulation (in-memory state)
        const firestoreSimulation = {
            links: [],
            addLink: function(link) {
                this.links.unshift(link);
                this.saveToStorage();
                return link;
            },
            updateLink: function(id, updates) {
                const linkIndex = this.links.findIndex(link => link.id === id);
                if (linkIndex !== -1) {
                    this.links[linkIndex] = {...this.links[linkIndex], ...updates};
                    this.saveToStorage();
                }
            },
            getLinks: function() {
                return this.links;
            },
            saveToStorage: function() {
                localStorage.setItem('alchemistLinks', JSON.stringify(this.links));
            },
            loadFromStorage: function() {
                const stored = localStorage.getItem('alchemistLinks');
                if (stored) {
                    this.links = JSON.parse(stored);
                }
            },
            deleteLink: function(id) {
                const linkIndex = this.links.findIndex(link => link.id === id);
                if (linkIndex !== -1) {
                    this.links.splice(linkIndex, 1);
                    this.saveToStorage();
                    return true;
                }
                return false;
            }
        };

        // Load data on initialization
        firestoreSimulation.loadFromStorage();

        // Toast notification system
        function showToast(message, type = 'success') {
            const toastContainer = document.getElementById('toast-container');
            const toastId = 'toast-' + Date.now();
            
            const icons = {
                success: 'check-circle',
                error: 'exclamation-triangle',
                info: 'info-circle',
                warning: 'exclamation-circle'
            };
            
            const toast = document.createElement('div');
            toast.id = toastId;
            toast.className = `toast glass p-4 rounded-xl shadow-lg border-l-4 ${
                type === 'success' ? 'border-green-500' : 
                type === 'error' ? 'border-red-500' :
                type === 'warning' ? 'border-amber-500' : 'border-blue-500'
            } flex items-center justify-between`;
            
            toast.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${icons[type]} mr-3 ${
                type === 'success' ? 'text-green-400' : 
                type === 'error' ? 'text-red-400' :
                type === 'warning' ? 'text-amber-400' : 'text-blue-400'
            }"></i>
                    <span>${message}</span>
                </div>
                <button onclick="closeToast('${toastId}')" class="ml-4 text-gray-400 hover:text-white transition-colors">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            toastContainer.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                closeToast(toastId);
            }, 5000);
        }

        function closeToast(toastId) {
            const toast = document.getElementById(toastId);
            if (toast) {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (document.getElementById(toastId)) {
                        document.getElementById(toastId).remove();
                    }
                }, 400);
            }
        }

        function generateShortCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let result = '';
            for (let i = 0; i < 6; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        function isValidUrl(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }

        function formatUrl(url) {
            if (url.length > 40) {
                return url.substring(0, 37) + '...';
            }
            return url;
        }

        // Using gold-url.com domain
        function getShortUrl(shortCode) {
            return `https://gold-url.com/${shortCode}`;
        }

        // Improved clipboard function
        async function copyToClipboard(text) {
            try {
                if (navigator.clipboard && window.isSecureContext) {
                    await navigator.clipboard.writeText(text);
                    showToast('Gold URL copied to clipboard!', 'success');
                    return true;
                } else {
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    textArea.style.position = 'fixed';
                    textArea.style.left = '-999999px';
                    textArea.style.top = '-999999px';
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    
                    try {
                        const successful = document.execCommand('copy');
                        document.body.removeChild(textArea);
                        
                        if (successful) {
                            showToast('Gold URL copied to clipboard!', 'success');
                            return true;
                        } else {
                            throw new Error('Copy command failed');
                        }
                    } catch (err) {
                        document.body.removeChild(textArea);
                        throw err;
                    }
                }
            } catch (err) {
                console.error('Failed to copy text:', err);
                const copied = prompt('Please copy this Gold URL:', text);
                if (copied !== null) {
                    showToast('Gold URL ready for pasting!', 'success');
                }
                return false;
            }
        }

        function updateTotalElixirs() {
            document.getElementById('total-elixirs').textContent = firestoreSimulation.getLinks().length;
        }

        // NEW: Update usage progress
        function updateUsageProgress() {
            const currentLinks = firestoreSimulation.getLinks().length;
            const progressSection = document.getElementById('usage-progress');
            const progressFill = document.getElementById('progress-fill');
            const usageCount = document.getElementById('usage-count');
            const progressMessage = document.getElementById('progress-message');
            const conversionMessage = document.getElementById('conversion-message');
            
            if (currentLinks > 0) {
                progressSection.classList.remove('hidden');
                const progressPercent = (currentLinks / MAX_FREE_LINKS) * 100;
                progressFill.style.width = `${Math.min(progressPercent, 100)}%`;
                usageCount.textContent = `${currentLinks}/${MAX_FREE_LINKS} links`;
                
                if (currentLinks >= CONVERSION_TRIGGER) {
                    conversionMessage.classList.remove('hidden');
                    progressMessage.innerHTML = `<i class="fas fa-crown mr-1"></i> Join waitlist for unlimited links!`;
                } else if (currentLinks >= MAX_FREE_LINKS - 2) {
                    progressMessage.textContent = 'Almost at demo limit - join waitlist for unlimited links!';
                } else {
                    progressMessage.textContent = 'Create up to 10 links in this demo';
                }
            } else {
                progressSection.classList.add('hidden');
                conversionMessage.classList.add('hidden');
            }
        }

        // Function to show analytics
        function showAnalytics(link) {
            const analyticsSection = document.getElementById('analytics-section');
            const analyticsContent = document.getElementById('analytics-content');
            
            // Generate mock analytics data
            const totalClicks = link.clicks;
            const todayClicks = Math.floor(totalClicks * 0.3);
            const weekClicks = Math.floor(totalClicks * 0.7);
            const monthClicks = totalClicks;
            
            analyticsContent.innerHTML = `
                <div class="analytics-item">
                    <div class="flex justify-between text-sm mb-1">
                        <span class="text-amber-200">Today</span>
                        <span class="text-amber-300">${todayClicks} demo clicks</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div class="analytics-bar h-2 rounded-full" style="width: ${(todayClicks/totalClicks)*100}%"></div>
                    </div>
                </div>
                <div class="analytics-item">
                    <div class="flex justify-between text-sm mb-1">
                        <span class="text-amber-200">This Week</span>
                        <span class="text-amber-300">${weekClicks} demo clicks</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div class="analytics-bar h-2 rounded-full" style="width: ${(weekClicks/totalClicks)*100}%"></div>
                    </div>
                </div>
                <div class="analytics-item">
                    <div class="flex justify-between text-sm mb-1">
                        <span class="text-amber-200">All Time</span>
                        <span class="text-amber-300">${monthClicks} demo clicks</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div class="analytics-bar h-2 rounded-full" style="width: 100%"></div>
                    </div>
                </div>
                <div class="text-xs text-amber-200 mt-4 p-3 bg-amber-800/20 rounded-lg">
                    <i class="fas fa-info-circle mr-1"></i>
                    Full version includes real tracking from all sources, geographic data, and referral sources
                </div>
            `;
            
            analyticsSection.classList.remove('hidden');
        }

        function renderLinks() {
            const linksContainer = document.getElementById('links-container');
            const links = firestoreSimulation.getLinks();
            
            updateTotalElixirs();
            updateUsageProgress();
            
            if (links.length === 0) {
                linksContainer.innerHTML = `
                    <div id="empty-state" class="text-center py-8 text-gray-400">
                        <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-amber-900/30 to-amber-700/10 flex items-center justify-center border border-amber-800/30 shimmer">
                            <i class="fas fa-flask text-2xl text-amber-700/70"></i>
                        </div>
                        <h3 class="text-lg font-medium text-gray-300 mb-2">No Elixirs Created Yet</h3>
                        <p class="max-w-md mx-auto text-sm">Create your first shortened URL above to see it here.</p>
                    </div>
                `;
                document.getElementById('analytics-section').classList.add('hidden');
                return;
            }
            
            let html = '<div class="space-y-4">';
            
            links.forEach(link => {
                const shortUrl = getShortUrl(link.shortCode);
                const createdDate = new Date(link.createdAt).toLocaleDateString();
                
                html += `
                    <div class="link-item glass rounded-xl p-4 md:p-5" id="link-${link.id}">
                        <div class="flex flex-col md:flex-row md:items-center justify-between">
                            <div class="flex-1 mb-3 md:mb-0">
                                <div class="flex flex-wrap items-center mb-2 gap-2">
                                    <span class="font-mono text-amber-300 bg-amber-900/30 px-3 py-1 rounded-lg text-sm">${shortUrl}</span>
                                    <button 
                                        onclick="copyToClipboard('${shortUrl}')" 
                                        class="text-gray-400 hover:text-amber-300 transition-colors p-2 rounded-lg gold-glow bg-amber-900/20"
                                        title="Copy Gold URL"
                                    >
                                        <i class="fas fa-copy text-sm"></i>
                                    </button>
                                    <button 
                                        onclick="showAnalyticsDetails('${link.id}')" 
                                        class="text-gray-400 hover:text-amber-300 transition-colors p-2 rounded-lg gold-glow bg-amber-900/20"
                                        title="View Analytics Preview"
                                    >
                                        <i class="fas fa-chart-bar text-sm"></i>
                                    </button>
                                    <span class="text-xs text-gray-500 bg-gray-800/50 px-2 py-1 rounded">Created: ${createdDate}</span>
                                </div>
                                <div class="text-xs text-gray-400 mt-2">
                                    <i class="fas fa-info-circle mr-1 text-amber-500"></i>
                                    Original URL: <span class="text-gray-300 truncate block">${formatUrl(link.longUrl)}</span>
                                </div>
                            </div>
                            <div class="flex items-center space-x-4">
                                <div class="text-center">
                                    <div class="text-xl md:text-2xl font-bold text-amber-300">${link.clicks}</div>
                                    <div class="text-xs text-gray-400 uppercase tracking-wide flex items-center">
                                        Demo Clicks
                                        <div class="ml-1 group relative">
                                            <i class="fas fa-question-circle text-gray-500 cursor-help"></i>
                                            <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap pointer-events-none">
                                                Number of test clicks from this dashboard. Full version tracks all clicks from anywhere.
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex space-x-2">
                                    <button 
                                        onclick="visitLink('${link.id}')" 
                                        class="text-green-400 hover:text-green-300 transition-colors p-2 rounded-lg gold-glow bg-green-900/20"
                                        title="Test Link (Demo Click)"
                                    >
                                        <i class="fas fa-external-link-alt"></i>
                                    </button>
                                    <button 
                                        onclick="deleteLink('${link.id}')" 
                                        class="text-red-400 hover:text-red-300 transition-colors p-2 rounded-lg gold-glow bg-red-900/20"
                                        title="Delete Link"
                                    >
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            linksContainer.innerHTML = html;
            
            if (links.length > 0) {
                showAnalytics(links[0]);
            }
        }

        // Function to show analytics for specific link
        function showAnalyticsDetails(linkId) {
            const link = firestoreSimulation.getLinks().find(l => l.id === linkId);
            if (link) {
                showAnalytics(link);
                document.getElementById('analytics-section').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }

        // UPDATED: Visit link with real redirect
        function visitLink(id) {
            const link = firestoreSimulation.getLinks().find(l => l.id === id);
            if (link) {
                firestoreSimulation.updateLink(id, { clicks: link.clicks + 1 });
                renderLinks();
                showAnalytics(link);
                
                showToast('Demo: Tracking click #' + (link.clicks) + '. Opening original URL...', 'info');
                
                // Open the short URL which will redirect via Google Apps Script
                setTimeout(() => {
                    window.open(getShortUrl(link.shortCode), '_blank');
                }, 1000);
            }
        }

        function deleteLink(id) {
            const link = firestoreSimulation.getLinks().find(l => l.id === id);
            if (!link) return;
            
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="glass rounded-2xl p-6 max-w-md w-full border border-amber-500/30">
                    <div class="text-center mb-6">
                        <i class="fas fa-exclamation-triangle text-amber-500 text-4xl mb-4"></i>
                        <h3 class="text-xl font-bold text-amber-300 mb-2">Delete Link?</h3>
                        <p class="text-gray-300">Are you sure you want to delete this link? This action cannot be reversed.</p>
                        <div class="mt-4 p-3 bg-amber-900/20 rounded-lg text-left">
                            <p class="text-sm font-mono text-amber-300 truncate">${getShortUrl(link.shortCode)}</p>
                            <p class="text-xs text-gray-400 truncate">${formatUrl(link.longUrl)}</p>
                        </div>
                    </div>
                    <div class="flex space-x-3">
                        <button id="confirm-cancel" class="flex-1 py-3 px-4 rounded-xl bg-gray-700 hover:bg-gray-600 transition-colors">Cancel</button>
                        <button id="confirm-delete" class="flex-1 py-3 px-4 rounded-xl bg-red-600 hover:bg-red-700 transition-colors gold-glow">Delete</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            document.getElementById('confirm-cancel').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            document.getElementById('confirm-delete').addEventListener('click', () => {
                if (firestoreSimulation.deleteLink(id)) {
                    renderLinks();
                    showToast('Link successfully deleted', 'success');
                }
                document.body.removeChild(modal);
            });
        }

        // NEW: Waitlist modal functionality
        function showWaitlistModal(context = 'Join the inner circle') {
            const modal = document.getElementById('waitlist-modal');
            modal.classList.remove('hidden');
            
            // Update context if needed
            if (context) {
                const title = modal.querySelector('h3');
                title.textContent = context;
            }
        }

        function hideWaitlistModal() {
            const modal = document.getElementById('waitlist-modal');
            modal.classList.add('hidden');
        }

        // UPDATED: Transmute function with Google Apps Script
        document.getElementById('transmute-btn').addEventListener('click', async function() {
            const urlInput = document.getElementById('url-input');
            const button = this;
            const originalText = button.innerHTML;
            const longUrl = urlInput.value.trim();
            
            if (!longUrl) {
                showToast('Please enter a URL to shorten', 'error');
                return;
            }
            
            // Check if user has reached the limit
            const currentLinks = firestoreSimulation.getLinks().length;
            if (currentLinks >= MAX_FREE_LINKS) {
                showWaitlistModal('Demo limit reached - upgrade for unlimited links!');
                showToast(`Demo limit reached. Join waitlist for unlimited links.`, 'warning');
                return;
            }
            
            let validUrl = longUrl;
            if (!isValidUrl(longUrl)) {
                const urlWithProtocol = longUrl.startsWith('http') ? longUrl : `https://${longUrl}`;
                
                if (!isValidUrl(urlWithProtocol)) {
                    showToast('Please enter a valid URL', 'error');
                    return;
                }
                
                validUrl = urlWithProtocol;
                urlInput.value = validUrl;
            }
            
            button.innerHTML = '<div class="spinner mr-2"></div> Creating...';
            button.disabled = true;
            
            try {
                // Use Google Apps Script backend
                const response = await fetch(BACKEND_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ longUrl: validUrl })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    
                    // Add to local storage for display
                    const newLink = {
                        id: 'link-' + Date.now(),
                        longUrl: validUrl,
                        shortCode: result.shortCode,
                        shortUrl: result.shortUrl,
                        clicks: 0,
                        createdAt: new Date().toISOString()
                    };
                    
                    firestoreSimulation.addLink(newLink);
                    renderLinks();
                    
                    // Show appropriate message based on usage
                    const newCount = firestoreSimulation.getLinks().length;
                    if (newCount >= CONVERSION_TRIGGER) {
                        showToast(`Gold URL created! You're a power user - join waitlist for unlimited access.`, 'info');
                    } else if (newCount >= MAX_FREE_LINKS - 2) {
                        showToast(`Gold URL created! Only ${MAX_FREE_LINKS - newCount} links left in demo.`, 'warning');
                    } else {
                        showToast('Gold URL created! Your short link is now active.', 'success');
                    }
                    
                    urlInput.value = '';
                } else {
                    throw new Error('Backend failed');
                }
            } catch (error) {
                console.error('Backend error:', error);
                // Fallback to demo mode
                const shortCode = generateShortCode();
                const newLink = {
                    id: 'link-' + Date.now(),
                    longUrl: validUrl,
                    shortCode: shortCode,
                    shortUrl: getShortUrl(shortCode),
                    clicks: 0,
                    createdAt: new Date().toISOString()
                };
                
                firestoreSimulation.addLink(newLink);
                renderLinks();
                
                const newCount = firestoreSimulation.getLinks().length;
                if (newCount >= CONVERSION_TRIGGER) {
                    showToast('Gold URL created in demo mode! You\'re a power user - join waitlist for unlimited access.', 'info');
                } else {
                    showToast('Gold URL created in demo mode! Backend will be available soon.', 'info');
                }
                urlInput.value = '';
            } finally {
                button.innerHTML = originalText;
                button.disabled = false;
            }
        });

        document.getElementById('url-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('transmute-btn').click();
            }
        });

        // Modal form handling
        document.getElementById('modal-waitlist-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const emailInput = document.getElementById('modal-email');
            const email = emailInput.value.trim();
            
            if (!email) {
                showToast('Please enter your email', 'error');
                return;
            }
            
            if (!isValidEmail(email)) {
                showToast('Please enter a valid email', 'error');
                return;
            }
            
            // Use the same formspree endpoint
            const formData = new FormData();
            formData.append('email', email);
            formData.append('_subject', 'New Alchemist\'s Forge Waitlist Signup from Modal!');
            
            try {
                const response = await fetch('https://formspree.io/f/xxxxxx', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                if (response.ok) {
                    updateJoinedCount();
                    showToast('Welcome to the inner circle! You\'ll hear from us soon.', 'success');
                    emailInput.value = '';
                    hideWaitlistModal();
                } else {
                    showToast('Something went wrong. Please try again.', 'error');
                }
            } catch (error) {
                showToast('Network error. Please check your connection and try again.', 'error');
            }
        });

        // Modal cancel button
        document.getElementById('modal-cancel').addEventListener('click', hideWaitlistModal);

        // Main waitlist form integration
        document.getElementById('waitlist-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const emailInput = document.getElementById('waitlist-email');
            const email = emailInput.value.trim();
            const button = this.querySelector('button[type="submit"]');
            const originalText = button.innerHTML;
            const formData = new FormData(this);
            
            if (!email) {
                showToast('Please enter your email', 'error');
                return;
            }
            
            if (!isValidEmail(email)) {
                showToast('Please enter a valid email', 'error');
                return;
            }
            
            button.innerHTML = '<div class="spinner mr-2"></div> Joining...';
            button.disabled = true;
            
            try {
                const response = await fetch(this.action, {
                    method: this.method,
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                if (response.ok) {
                    updateJoinedCount();
                    showToast('Welcome to the inner circle! You\'ll hear from us soon.', 'success');
                    emailInput.value = '';
                } else {
                    showToast('Something went wrong. Please try again.', 'error');
                    }
            } catch (error) {
                showToast('Network error. Please check your connection and try again.', 'error');
            } finally {
                button.innerHTML = originalText;
                button.disabled = false;
            }
        });

        function isValidEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // Counter functionality
        function updateJoinedCount() {
            let currentCount = parseInt(document.getElementById('joined-count').textContent);
            currentCount += 1;
            document.getElementById('joined-count').textContent = currentCount;
            
            localStorage.setItem('alchemistJoinedCount', currentCount);
        }

        function loadJoinedCount() {
            const storedCount = localStorage.getItem('alchemistJoinedCount');
            if (storedCount) {
                document.getElementById('joined-count').textContent = storedCount;
            }
        }

        // Handle redirects if someone visits a short URL on your domain
        function handleRedirects() {
            const path = window.location.pathname;
            
            // If we're on a short URL path (like /abc123)
            if (path.length > 1 && path !== '/') {
                const shortCode = path.substring(1); // Remove the leading slash
                
                // Look for the link in local storage
                const links = firestoreSimulation.getLinks();
                const link = links.find(l => l.shortCode === shortCode);
                
                if (link) {
                    // Update click count
                    const linkIndex = links.findIndex(l => l.shortCode === shortCode);
                    if (linkIndex !== -1) {
                        firestoreSimulation.updateLink(links[linkIndex].id, { 
                            clicks: links[linkIndex].clicks + 1 
                        });
                    }
                    
                    // Redirect to the original URL
                    window.location.href = link.longUrl;
                } else {
                    // Link not found - redirect to Google Apps Script
                    window.location.href = `${BACKEND_URL}?code=${shortCode}`;
                }
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            renderLinks();
            loadJoinedCount();
            
            // Handle redirects if we're on the main domain
            if (window.location.hostname === 'gold-url.com') {
                handleRedirects();
            }
            
            setTimeout(() => {
                showToast('Welcome! Create short URLs that actually redirect. Join waitlist for unlimited access.', 'info');
            }, 1000);
        });
    </script>
</body>
</html>
