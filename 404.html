<!DOCTYPE html>
<html>
<head>
    <title>Redirecting...</title>
    <script>
        const path = window.location.pathname;
        const shortCode = path.replace(/^\//, '');
        
        if (shortCode && shortCode !== 'index.html') {
            // Directly call Google Apps Script to get the redirect URL
            const scriptUrl = 'https://script.google.com/macros/s/AKfycbx7PgWakVc7mIhf8GVOcd5ExfEwJqKOYwCST8FNUNlDbyJ8MCTXyQV8659ctrFeTP8/exec';
            
            fetch(`${scriptUrl}?path=${shortCode}`)
                .then(response => response.text())
                .then(html => {
                    // Try to extract the redirect URL from the HTML
                    const match = html.match(/window\.location\.href\s*=\s*'([^']+)'/);
                    if (match && match[1]) {
                        window.location.href = match[1];
                    } else {
                        // If no redirect found, show the HTML content
                        document.write(html);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    showNotFound();
                });
        } else {
            window.location.href = 'https://gold-url.com';
        }
        
        function showNotFound() {
            document.body.innerHTML = `
                <div style="font-family: Arial, sans-serif; text-align: center; padding: 50px;">
                    <h1>ðŸ”— Gold URL</h1>
                    <h2>Link Not Found</h2>
                    <p>This short URL doesn't exist or has expired.</p>
                    <p><a href="https://gold-url.com">Create your own short URLs</a></p>
                </div>
            `;
        }
    </script>
</head>
<body>
    <p>Redirecting...</p>
</body>
</html>
